# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è: Headless —Ä–µ–∂–∏–º –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

## üéØ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

### 1. –ë—Ä–∞—É–∑–µ—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–∫—Ä—ã—Ç (headless)

**–†–∞–Ω—å—à–µ:**
- –í–∫–ª–∞–¥–∫–∞ "–û–±—Ä–µ–∑–∫–∞ –≤–æ–∑—Ä–∞—Å—Ç–∞" - –±—Ä–∞—É–∑–µ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–ª—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

**–¢–µ–ø–µ—Ä—å:**
- ‚úÖ –í—Å–µ –≤–∫–ª–∞–¥–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –≤ headless —Ä–µ–∂–∏–º–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- –ë—Ä–∞—É–∑–µ—Ä –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è, –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ñ–æ–Ω–µ
- –ú–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å —á–µ—Ä–µ–∑ —á–µ–∫–±–æ–∫—Å –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –≤–∏–¥–µ—Ç—å –±—Ä–∞—É–∑–µ—Ä

**–ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- `tabs/obrezka_tab.py` - headless=True –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

---

### 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤–æ –≤—Å–µ—Ö –≤–∫–ª–∞–¥–∫–∞—Ö

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –í–∫–ª–∞–¥–∫–∞ "–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–π" –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –æ—Ç–∫—Ä—ã–≤–∞–ª–∞ –≤–∏–¥–∏–º—ã–π –±—Ä–∞—É–∑–µ—Ä
- –ü—Ä–æ—Å–∏–ª–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤—Ä—É—á–Ω—É—é –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É
- –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ –¥–∞–Ω–Ω—ã–µ –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ (Ctrl+H)

**–†–µ—à–µ–Ω–∏–µ:**
- ‚úÖ –õ–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±–µ—Ä—É—Ç—Å—è –∏–∑ config (Ctrl+H)
- ‚úÖ –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ - –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ –ë—Ä–∞—É–∑–µ—Ä –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è, –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ñ–æ–Ω–µ
- ‚úÖ –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç - —Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –≤–∏–¥–∏–º—ã–π –±—Ä–∞—É–∑–µ—Ä

**–ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- `tabs/greeting_tab.py`:
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `do_auto_login()` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—Ö–æ–¥–∞
  - `FlowFetchWorker` —Ç–µ–ø–µ—Ä—å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç login –∏ password
  - `_playwright_fetch_in_process()` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ config

---

## üìã –î–µ—Ç–∞–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π:

### tabs/obrezka_tab.py
```python
# –°—Ç—Ä–æ–∫–∞ 293
self.headless_cb.setChecked(True)  # –ë—ã–ª–æ False
```

### tabs/greeting_tab.py
```python
# –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
def do_auto_login(page) -> bool:
    """–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –µ—Å–ª–∏ –µ—Å—Ç—å –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å"""
    if not login or not password:
        return False
    try:
        login_input = page.locator("#session_name, ...").first
        password_input = page.locator("#session_password, ...").first
        
        if login_input.count() > 0 and password_input.count() > 0:
            login_input.fill(login)
            password_input.fill(password)
            password_input.press("Enter")
            page.wait_for_timeout(3000)
            return True
    except Exception:
        pass
    return False

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
if needs_login(page):
    if login and password:
        do_auto_login(page)  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—Ö–æ–¥
        page.goto(url, wait_until="domcontentloaded")
    else:
        # –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö - –æ—Ç–∫—Ä—ã–≤–∞–µ–º –≤–∏–¥–∏–º—ã–π –±—Ä–∞—É–∑–µ—Ä
        ctx = p.chromium.launch_persistent_context(
            user_data_dir=str(user_data_dir),
            headless=False,
        )
```

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç:

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

**–†–∞–Ω—å—à–µ:**
1. –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã
2. –í—ã–±–æ—Ä –≤–∫–ª–∞–¥–∫–∏
3. –ù–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏ "–ù–∞—á–∞—Ç—å"
4. ‚ùå –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –±—Ä–∞—É–∑–µ—Ä –Ω–∞ —ç–∫—Ä–∞–Ω–µ
5. ‚ùå –ù—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –≤–≤–µ—Å—Ç–∏ –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å
6. –†–∞–±–æ—Ç–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã

**–¢–µ–ø–µ—Ä—å:**
1. –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã
2. **–û–¥–∏–Ω —Ä–∞–∑** –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (Ctrl+H):
   - –õ–æ–≥–∏–Ω
   - –ü–∞—Ä–æ–ª—å
   - ID —Ç–∞–±–ª–∏—Ü
3. –í—ã–±–æ—Ä –ª—é–±–æ–π –≤–∫–ª–∞–¥–∫–∏
4. –ù–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏ "–ù–∞—á–∞—Ç—å"
5. ‚úÖ –í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ —Ñ–æ–Ω–µ
6. ‚úÖ –ë—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è
7. ‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

---

## üìä –°–≤–æ–¥–∫–∞ –ø–æ –≤–∫–ª–∞–¥–∫–∞–º:

| –í–∫–ª–∞–¥–∫–∞ | Headless –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è |
|---------|----------------------|-------------|
| Parser + Google Sheets | ‚úÖ –î–∞ | ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–∑ config |
| –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –ò–ù–ù | ‚úÖ –î–∞ | ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–∑ config |
| –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–π | ‚úÖ –î–∞ | ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–∑ config |
| –û–±—Ä–µ–∑–∫–∞ –≤–æ–∑—Ä–∞—Å—Ç–∞ | ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û** - –¥–∞ | ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–∑ config |

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:

### –õ–æ–≥–∏–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ greeting_tab.py:

1. **–ü–µ—Ä–≤–∞—è –ø–æ–ø—ã—Ç–∫–∞** - headless —Ä–µ–∂–∏–º:
   ```python
   ctx = p.chromium.launch_persistent_context(
       user_data_dir=str(user_data_dir),
       headless=True,  # –°–∫—Ä—ã—Ç—ã–π –±—Ä–∞—É–∑–µ—Ä
   )
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏**:
   ```python
   if needs_login(page):
       # –ù—É–∂–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
   ```

3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—Ö–æ–¥** (–µ—Å–ª–∏ –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ):
   ```python
   if login and password:
       do_auto_login(page)  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–≤–æ–¥–∏–º –¥–∞–Ω–Ω—ã–µ
   ```

4. **Fallback** (–µ—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç):
   ```python
   else:
       # –û—Ç–∫—Ä—ã–≤–∞–µ–º –≤–∏–¥–∏–º—ã–π –±—Ä–∞—É–∑–µ—Ä
       ctx = p.chromium.launch_persistent_context(
           headless=False,
       )
   ```

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏:

### –ì–¥–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é:

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º—É
2. –ù–∞–∂–º–∏—Ç–µ **Ctrl+H**
3. –í–∫–ª–∞–¥–∫–∞ "–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è"
4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
   - –õ–æ–≥–∏–Ω ITNELEP
   - –ü–∞—Ä–æ–ª—å ITNELEP
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

### –ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

- ‚úÖ –í—Å–µ 4 –≤–∫–ª–∞–¥–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ
- ‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ –ë—Ä–∞—É–∑–µ—Ä –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –≤ —Ñ–æ–Ω–µ

---

## üìù –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:

### –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –≤–∏–¥–µ—Ç—å –±—Ä–∞—É–∑–µ—Ä:

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –≤–∫–ª–∞–¥–∫–∏ –∏–º–µ—é—Ç —á–µ–∫–±–æ–∫—Å "Headless":
- **Parser** - –µ—Å—Ç—å —á–µ–∫–±–æ–∫—Å "–°–∫—Ä—ã–≤–∞—Ç—å –±—Ä–∞—É–∑–µ—Ä (headless)"
- **–û–±—Ä–µ–∑–∫–∞** - –µ—Å—Ç—å —á–µ–∫–±–æ–∫—Å "Headless (–±–µ–∑ –æ–∫–Ω–∞ –±—Ä–∞—É–∑–µ—Ä–∞)"

–°–Ω–∏–º–∏—Ç–µ –≥–∞–ª–æ—á–∫—É —á—Ç–æ–±—ã –≤–∏–¥–µ—Ç—å —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ.

### –ï—Å–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (Ctrl+H)
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤–æ–π—Ç–∏ –≤—Ä—É—á–Ω—É—é –Ω–∞ —Å–∞–π—Ç–µ
4. –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è - –æ—Ç–∫–ª—é—á–∏—Ç–µ headless —á—Ç–æ–±—ã –≤–∏–¥–µ—Ç—å —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç

---

## ‚úÖ –ò—Ç–æ–≥:

**–¢–µ–ø–µ—Ä—å –ø—Ä–æ–≥—Ä–∞–º–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è:**
- –ù–µ –Ω—É–∂–Ω–æ –≤–≤–æ–¥–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∫–∞–∂–¥—ã–π —Ä–∞–∑
- –ë—Ä–∞—É–∑–µ—Ä –Ω–µ –º–µ—à–∞–µ—Ç —Ä–∞–±–æ—Ç–µ
- –í—Å—ë –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ —á–µ—Ä–µ–∑ Ctrl+H
- –†–∞–±–æ—Ç–∞–µ—Ç –±—ã—Å—Ç—Ä–æ –∏ –Ω–µ–∑–∞–º–µ—Ç–Ω–æ –≤ —Ñ–æ–Ω–µ

**–ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ .exe —á—Ç–æ–±—ã –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è!**
